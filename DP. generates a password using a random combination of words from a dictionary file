import secrets
import string
from pathlib import Path

def load_words(dict_path: str):
    p = Path(dict_path)
    if not p.exists():
        raise FileNotFoundError(f"Dictionary file not found: {dict_path}")
    words = []
    with p.open("r", encoding="utf-8", errors="ignore") as f:
        for line in f:
            w = line.strip()
            if w:
                words.append(w)
    if not words:
        raise ValueError("Dictionary file contains no usable words.")
    return words

def generate_password(words, num_words=4, separator='-', cap=False, add_number=True, add_symbol=True):
    chosen = []
    for _ in range(num_words):
        w = secrets.choice(words)
        if cap:
            w = w.capitalize()
        chosen.append(w)
    pwd = separator.join(chosen)
    if add_number:
        pwd += secrets.choice(string.digits)
    if add_symbol:
        symbols = "!@#%&*?"
        pwd += secrets.choice(symbols)
    return pwd

dict_file = "dict1.txt"
try:
    words = load_words(dict_file)
except Exception as e:
    print("Error:", e)
num = int(input("Number of words to use: "))
separator = input("Separator between words: ")
cap_inp = input("Capitalize words? (y/n): ").lower() == "n"
add_num = input("Append a digit? (y/n): ").lower() != "n"
add_sym = input("Append a symbol? (y/n): ").lower() != "n"

password = generate_password(words,num,separator,cap_inp,add_num,add_sym)
print("Generated password:")
print(password)
